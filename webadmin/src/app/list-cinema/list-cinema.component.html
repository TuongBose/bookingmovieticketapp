<div class="container mt-4">
  <h3 class="text-center mb-4">Danh sách rạp chiếu phim</h3>

  <!-- Spinner khi đang tải -->
  <div *ngIf="isLoading" class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Đang tải...</span>
    </div>
  </div>

  <!-- Thông báo lỗi -->
  <div *ngIf="errorMessage" class="alert alert-danger text-center">
    {{ errorMessage }}
  </div>

  <!-- Dropdown chọn thành phố -->
  <div class="mb-4">
    <label for="citySelect" class="form-label">Chọn thành phố:</label>
    <select id="citySelect" class="form-select" [(ngModel)]="selectedCity" (change)="filterCinemas()">
      <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
    </select>
  </div>

  <!-- Danh sách rạp chiếu phim -->
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    <div class="col" *ngFor="let cinema of filteredCinemas">
      <div class="card h-100 shadow-sm">
        <img
          [src]="getCinemaImageUrl(cinema.id, cinema.imagename)"
          class="card-img-top"
          alt="{{ cinema.name }}"
          style="width: 100%; height: 225px; object-fit: cover;"
          (error)="onImageError($event, cinema.id)"
        />
        <div class="card-body">
          <h5 class="card-title">{{ cinema.name }}</h5>
          <p class="card-text text-muted">Thành phố: {{ cinema.city }}</p>
          <p class="card-text">Địa chỉ: {{ cinema.address }}</p>
          <p class="card-text">Số điện thoại: {{ cinema.phonenumber }}</p>
          <p class="card-text">Tọa độ: {{ cinema.coordinates }}</p>
          <p class="card-text">Số phòng chiếu tối đa: {{ cinema.maxroom }}</p>
          <a href="#" class="btn btn-primary">Xem chi tiết</a>
        </div>
      </div>
    </div>
    <!-- Hiển thị thông báo nếu không có rạp -->
    <div *ngIf="!filteredCinemas.length && !isLoading && !errorMessage" class="text-center text-muted col-12">
      Hiện không có rạp chiếu phim nào.
    </div>
  </div>
</div>